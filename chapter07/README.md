# 7. 성능 튜닝

리엑트는 기본적으로 성능을 고려하여 설계됨. DOM 조작 횟수 최소화 등.

## 조정 프로세스
리엑트는 컴포넌트의 상태가 변경될 때마다 렌더링 프로세스가 트리거되어 동작한다. 이 때 가상 DOM이 생성 되고 기존의 가상 DOM과 비교 연산을 통해 변경이 필요한 DOM요소를 식별한다. 이러한 과정을 조정(reconcilation) 이라고 한다.

# 조정 프로세스의 작동 방식
- 일괄처리
리액트는 컴포넌트에서 setState를 호출할 때마다 해당 항목을 즉시 업데이트 하는 대신 더티로 표시한다. 즉, 컴포넌트의 상태를 변경해도 즉시 효과가 나타나지는 않고, 이벤트 루프를 이용해 변경 사항을 일괄처리하여 렌더링한다. 이벤트 루프란 끊임 없이 데이터를 배포하고, 호출해야 하는 이벤트 핸들러와 수명주기 메서드를 확인하기 위해 무한히 실행되는 자바스크립트 프로세스다.

- 하위 트리 렌더링
이벤트 루프가 끝나면 더티 컴포넌트와 이에 포함된 자식을 다시 렌더링한다. 이때 변경되지 않은 컴포넌트의 render도 호출 되지만, 실제 DOM을 조작하는 것은 아니므로 성능에 문제 없이 빠르게 수행할 수 있다.

## 리액트 퍼프
리액트 퍼프는(React Perf) 앱의 성능에 대한 전반적인 개요 정보를 확인하고 shouldComponentUpdate 수명주기 후크를 구현할 성능 최적화 기회를 찾는 데 도움을 주는 프로파일링 도구다.
# 리액트 퍼프 설치와 이용
'npm install --save react-addons-perf' 로 설치 가능

## shallowCompare 애드온 && shouldComponentUpdate
리액트는 shouldComponentUpdate에서 사용할 수 있는 shallowCompare라는 애드온을 제공한다. 이 애드온은 객체의 속성과 상태를 간소하게 비교하고 변경 사항이 있는지 여부를 반환한다. 성능 향상을 볼수 있는 조건은 1. 간소하게 비교하려는 컴포넌트가 '순수' 컴포넌트다. 즉, 속성과 상태가 동일할 경우 동일한 결과를 랜더링한다. 2. 상태를 조작하는 데 변경 불가능한 값이나 리액트의 불변성 도우미를 이용한다.

# 정리
리액트는 대부분의 경우 빠르게 수행되지만, 필요한경우 shouldComponentUpdate 수명주기 메서드를 구현해 컴포넌트와 해당 하위 트리를 다시 랜더링하지 않게 만드는 방법으로 성능을 개선할 수 있다.
