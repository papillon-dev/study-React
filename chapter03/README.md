# 03 컴포넌트를 이용한 애플리케이션 구축

*유효성 검사를 알아보고 컴포넌트를 조합해서 리엑트를 설계하는 방법. 마지막으로 리엑트 컴포넌트의 수명주기를 살펴볼거에요

* * *



>## 속성 유효성 검사

1. 언제든지 컴포넌트를 열고 어떤 속성이 필요한지 그리고 속성의 형식이 무엇인지 알 수 있다
  - 느슨한 타입, 동적 언어인 자바스크립트에서 유용하게 사용 가능.
  - ex) 아. 바로 어제 개발한 스크립트 변수에 뭐가 담겨져있는지 나는 모르겠다.

2. 문제가 발생한 경우 리액트가 콘솔에 오류 메시지를 출력해 어떤 속성이 잘못되거나 누락됐는지 그리고 문제가 발생한 render 메서드가 무엇인지 알려줄 수 있다.
  - 좋은 부분!
 
>## 속성 기본값

속성 값을 별도로 제공하지 않으면 적용되는 기본 값 사용 가능 (isRequired는 없어야 겠죠)

#### 강제는 아니지만 propTypes는 꼭 지정해 줍시다. 프로젝트를 인수인계 받거나 개발 한 달 뒤에 보면 서로 힘들잖아요. 

>## 기본제공 propTypes 유효성 검사기

* 책 참고 기본 제공은 책을 보시구요
* 흥미로운 것은 커스텀 protoTypes 유효성 검사기!

- props, propName, componentName 을 인자로 받는 펑션 안에 유효성 검사를 만들면 됨. 성공했을 때는 아무것도 리턴하지 않고 실패했을 때는 Error 인스턴스를 반환하면 됨

>## 컴포넌트 조합 전략과 모범 사례

- 사실 이런 라이브러리나 프레임워크는 설계자의 설계 의도에 맞게 사용하는것이 굉장히 중요하다고 생각되는데요. 저의 경우에는 이 부분이 제일 재미있으면서도 어려운 부분 같습니다

# 리엑트 컴포넌트는 상태 저장 컴포넌트와 순수 컴포넌트로 나누어 진다고 하네요.

1. 속성(props)은 컴포넌트의 구성 정보에 해당한다 속성은 상위 컴포넌트로부터 받으며 이를 받은 컴포넌트 내에서는 변경할 수 없다.

2. 상태(state)는 컴포넌트의 생성자에 정의된 기본값에서 시작해 (일반적으로 사용자 이벤트에 의해) 여러차례 변경될 수 있다. 컴포넌트는 자신의 상태를 내부적으로 관리한다. 또한 상태가 변경될 때마다 컴포넌트가 다시 렌더링 된다.

- 상태 저장 컴포넌트는 말 그대로 state를 가지고 있는 컴포넌트 이구요. 순수 컴포넌트는 데이터를 그대로 렌더링 하는 역할만 하는 컴포넌트입니다.
- 당연하게도 state의 변화에 반응해야하는 상태 저장 컴포넌트보단, 단순한 순수 컴포넌트가 재사용성이나 테스트하기에 수월 하겠죠!!. 그래서 가능하다면 컴포넌트 대부분은 순수 컴포넌트가 좋다구해요.

>## 어떤 컴포넌트가 상태 저장이어야 할까?

- 저번 스터디때 제가 질문했던 내용인것 같은데요. 책에 나와있었네요. 책을 보시면 4가지 검사 목록이 보이는데요. 우리 같이 하나하나 쉽게 이해해봐요

1. 해당하는 상태를 기준으로 무언가를 렌더링하는 모든 컴포넌트를 찾는다.
	- state가 필요하고, 어떠한 이벤트에 변경점이 있는 컴포넌트를 찾으라는거 같죠?

2. 공통 소유자 컴포넌트를 찾는다. (계층에서 상태를 필요로 하는 모든 컴포넌트의 상위에 있는 단일 컴포넌트).
	- 1번에서 찾은 컴포넌트들의 상위에 있는 단일 컴포넌트.

3. 공통 소유자나 계층에서 더 상위에 있는 다른 컴포넌트가 상태를 소유해야 한다.
	- 요건 책을 볼게요. 79페이지. 상위 컴포넌트에서 소유하고 있는 state를 하위에 props로 넘기고 (콜백과 함께), 하위 컴포넌트는 props를 토대로 렌더링 하며, 값이 변경되어야 할 경우에는 콜백을 호출하여 다시 상위 컴포넌트의 state를 변경 하는 구조의 내용입니다.

4. 해당 상태를 소유하기에 적절한 컴포넌트를 찾을 수 없는 경우 단순히 상태를 저장하기 위한 컴포넌트를 새로 만들고 계층에서 공통 소유자 컴포넌트 위쪽에 추가한다.
	- 79페이지 처럼 딱 떨어지는 경우? 가아니면 래퍼를 하나 만들어서 적용시키라는 말 같은데요. 경험이 있어야 확실한 상황을 알 것 같네요

해당 부분에 대한 경험을 이야기 해봐요~. 저의 경우에는 리엑트의 몇 가지 개념을 프로젝트에 적용시켜보고 있는데요. 이번에 state props에 대한 이해도가 조금 올라간것 같아 적용시키던 중 아주 아쉬운 사실을 알게 되었어요. 서로 관계가 없는 뷰간의 커뮤니케이션이 필요한 상황이였는데요, 도통 답이 생각이안나 구글 서칭을 좀 해보았습니다. https://www.reddit.com/r/reactjs/comments/39c0su/communication_between_two_components_without_any/ 저랑 같은 질문을 한 사람이 있는데.. 이벤트 이미터로 처리하려다가 빡친것 같네요. 저도 똑같구요 대답들을 보면..
1. 상위 컴포넌트를 만들어서 해봐
2. 플럭스를 쓰렴
3. 플럭스는 오바일수도 있어

1 번을 최우선으로 고려하는게 맞을것 같은데... 제 프로젝트는 리엑트가 아니여서 매우 복잡한것.. 상위 컴포넌트가 없습니다. 여튼 하고자 하는 얘기는 저 검사목록을 글로는 이해를 해도 프로젝트 진행하다보면 분명 잘 떠오르지 않을거에요. 경험적인 부분이겠죠 ㅎㅎ



>## 컴포넌트 수명주기

- 왜 수명주기를 알아야할까요? 성능 최적화와 이후 플럭스까지 이어나가는데 중요한 역할을 한다고 하네요.
- 저는 일전엔 안드로이드, 아이폰 개발을 했었는데요. 각각 수명주기 (안드로이드에선 생명주기라고 했던것 같은데... )에 어떤 코드가 들어있느냐에 따른 성능 이슈가 있더라구요.
- 뭐이런걸 다떠나서 개발자가 자기가 개발하고있는 플랫폼이 어찌 돌아가는지 정도는 알아야겠죠 ㅋ

># 수명주기 단계와 메서드

- 수명주기는 매우 중요하지만, 제가 딱히 말씀 드릴건 없네요. 한번씩 쭉 읽어보시고 필요할때 또 찾아보면 될 것같습니다.
- 책 예제에는 ajax처리후 성공시에 state 변경을 통한 렌더링을 진행하는데요, didmount에서 하셔야 뷰가 그려진 상태에서 state로 다시 그려지겠죠.

># 불변성에 대한 개요 -- 여기부터 계속
- 객체를 변경하지 않고 대체하는 것 
- 불변성이 꽤나 중요한 것 같네요.것